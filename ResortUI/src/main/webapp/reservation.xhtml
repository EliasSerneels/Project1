<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ps="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:p="http://primefaces.org/ui">

    <body>
        <ui:composition template="./common/template.xhtml">

            <ui:define name="title">Reserveren</ui:define>

            <ui:define name="navbar"><h1>Reserveren</h1></ui:define>

            <ui:define name="content">
<!--
                <ui:fragment rendered="${!sessionDto.userDto.loggedIn}">
                    <script>
                        window.location.href = "http:login.xhtml";
                    </script>
                </ui:fragment>
-->
                <h2>Reservatie boeken of aanpassen</h2>
                <h:form class="input-form">
                    <h:messages styleClass="alert alert-danger" ps:role="alert"></h:messages>
                    <h:inputHidden value="${reservation.dto.detail.id}"/>
                    <div class="col-md-6-l">
                        <div class="input-group">
                            <span class="input-group-addon">Startdatum</span>
<!--                            <h:inputText label="Reservatie startdatum" value="${reservation.dto.detail.startDate}" class="form-control" required="true" validatorMessage="De startdatum moet in het formaat dd/mm/yyyy">
                                <f:validateRegex pattern="^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$"/>

                            </h:inputText>-->
                            <p:outputLabel for="popup1" value="" />
                            <p:calendar id="popup1" value="${reservation.dto.detail.startDate}" />
            
                        </div>
                    </div>                    
                    <div class="col-md-6-r"> 
                        <div class="input-group">
                            <span class="input-group-addon">Einddatum</span>
<!--                            <h:inputText label="Reservatie einddatum" value="${reservation.dto.detail.endDate}" class="form-control" required="true" validatorMessage="De einddatum moet in het formaat dd/mm/yyyy">
                                <f:validateRegex pattern="^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$"/>

                            </h:inputText>-->
                            <p:outputLabel for="popup2" value="" />
                            <p:calendar id="popup2" value="${reservation.dto.detail.endDate}" />
                            
                        </div>
                    </div>
                    
                    <div class="col-md-6-l">
                        <div class="input-group">
                            <span class="input-group-addon">Klant</span>
                            <h:selectOneMenu label="Klant reservatie" value="${reservation.dto.detail.customerName}" class="form-control" required="true" validatorMessage="De inhoud van het veld klant is leeg.">
                                <f:selectItems value="${reservation.dto.customerList}" var="Klantnaam"
                                               itemValue="${customerName}" itemLabel="${customerName}"/>
                            </h:selectOneMenu>
                        </div>
                    </div>
                    <div class="col-md-6-r">
                        <div class="input-group">
                            <span class="input-group-addon">Bungalow</span>
                            <h:selectOneMenu label="Bungalow reservatie" value="${reservation.dto.detail.bungalowName}" class="form-control" required="true" validatorMessage="De inhoud van het veld bungalow is leeg.">
                                <f:selectItems value="${reservation.dto.bungalowList}" var="Bungalownaam"
                                               itemValue="${bungalowName}" itemLabel="${bungalowName}"/>
                            </h:selectOneMenu>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="input-group">
                            <h:commandButton class="button" action="${reservation.add()}" value="Save" ></h:commandButton>
                        </div>
                    </div>
                </h:form> 
                <br/><br/>
                <h2>Reservatieoverzicht</h2>
                <table>
                    <tr>
                        <th>Startdatum</th>
                        <th>Einddatum</th>
                        <th>Starttijdstip</th>
                        <th>Eindtijdstip</th>
                        <th>Klant</th>
                        <th>Bungalow</th>
                        <th></th>
                    </tr>
                    <tbody>
                        <ui:repeat value="${reservation.dto.list}" var="listDetail">
                            <h:form>
                                <tr>                              
                                    <td>${listDetail.startDate}</td>
                                    <td>${listDetail.endDate}</td>
                                    <td>${listDetail.startTime}</td>
                                    <td>${listDetail.endTime}</td>
                                    <td>${listDetail.customerName}</td>
                                    <td>${listDetail.bungalowName}</td> 
                                    <td><h:commandButton class="button" action="${reservation.remove(listDetail.id)}" value="Verwijder"></h:commandButton></td>
                                </tr>
                            </h:form>
                        </ui:repeat>
                    </tbody>
                </table>

            </ui:define>

        </ui:composition>

    </body>
</html>

