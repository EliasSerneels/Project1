<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ps="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:p="http://primefaces.org/ui">

    <body>
        <ui:composition template="./common/template.xhtml">

            <ui:define name="title">Reserveren</ui:define>

            <ui:define name="navbar"><h1>Reserveren</h1></ui:define>

            <ui:define name="content">

                <ui:fragment rendered="${sessionDto.userDto.level &lt; 3}">
                    <script type="text/javascript">window.location.href="redirect.xhtml";</script>
                </ui:fragment>
                
                <h2>Reservatie boeken of aanpassen</h2>
                <h:form class="input-form">
                    <h:messages styleClass="alert alert-danger" ps:role="alert"></h:messages>
                    <h:inputHidden value="${reservation.dto.detail.id}"/>
                    <div class="col-md-6-l">
                        <div class="input-group">
                            <span class="input-group-addon">Startdatum</span>
<!--                            <h:inputText label="Reservatie startdatum" value="${reservation.dto.detail.startDate}" class="form-control" required="true" validatorMessage="De startdatum moet in het formaat dd/mm/yyyy">
                                <f:validateRegex pattern="^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$"/>

                            </h:inputText>-->

                            <p:calendar  pattern="dd-MM-yyyy"  id="popup1" value="${reservation.dto.detail.startDate}" required="true" requiredMessage="Gelieve een startdatum in te vullen." />
            
                        </div>
                    </div>    
                     <div class="col-md-6-l">
                        <div class="input-group">
                            <span class="input-group-addon">Starttijd</span>
                           <h:inputText label="Starttijd" 
                                         value="${reservation.dto.detail.startTime}" class="form-control"
                                         required="true" requiredMessage="Vul een starttijd in. Formaat 23:59" validatorMessage="Vul een starttijd in. Formaat 23:59"
                                         >
                                <f:validateRegex pattern="^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$"/>
                                </h:inputText>
                        </div>
                    </div>          
                    <div class="col-md-6-r"> 
                        <div class="input-group">
                            <span class="input-group-addon">Einddatum</span>
<!--                            <h:inputText label="Reservatie einddatum" value="${reservation.dto.detail.endDate}" class="form-control" required="true" validatorMessage="De einddatum moet in het formaat dd/mm/yyyy">
                                <f:validateRegex pattern="^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$"/>

                            </h:inputText>-->

                            <p:calendar pattern="dd-MM-yyyy"  id="popup2" value="${reservation.dto.detail.endDate}" required="true" requiredMessage="Gelieve een einddatum in te vullen."/>
                            
                        </div>
                    </div>
                    
                                        <div class="col-md-6-r"> 
                        <div class="input-group">
                            <span class="input-group-addon">Eindtijd</span>
                           <h:inputText label="Eindtijd" 
                                         value="${reservation.dto.detail.endTime}" class="form-control"
                                         required="true" requiredMessage="Vul een eindtijd in. Formaat 23:59" validatorMessage="Vul een eindtijd in. Formaat 23:59"
                                         >
                                <f:validateRegex pattern="^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$"/>
                                </h:inputText>
                        </div>
                    </div>
                    
                    <div class="col-md-6-l">
                        <div class="input-group">
                            <span class="input-group-addon">Klant</span>
                    <p:selectOneMenu required="true" id="Klant" value="${reservation.dto.detail.customerName}" style="width:415px; margin-left: 5px;" requiredMessage="Gelieve een klant toe te kiezen.">
                    <f:selectItem itemLabel="Kies klant" itemValue="${customerName}" noSelectionOption="true" />
                    <f:selectItems value="${reservation.dto.customerList}" />
                     </p:selectOneMenu>
                        </div>
                    </div>
                    <div class="col-md-6-r">
                        <div class="input-group">
                            <span class="input-group-addon">Bungalow</span>
                    <p:selectOneMenu required="true" id="Bungalow" value="${reservation.dto.detail.bungalowName}" style="width:415px; margin-left: 5px;" requiredMessage="Gelieve een bungalow toe te wijzen.">
                    <f:selectItem itemLabel="Kies bungalow" itemValue="${bungalowName}" noSelectionOption="true" />
                    <f:selectItems value="${reservation.dto.bungalowList}" />
                     </p:selectOneMenu>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="input-group">
                            <h:commandButton class="button" action="${reservation.add()}" value="Save" ></h:commandButton>
                        </div>
                    </div>
                </h:form> 
                <br/><br/>
                <h2>Reservatieoverzicht</h2>
                <ui:include src="dataTables/tableReservation.xhtml"></ui:include>

            </ui:define>

        </ui:composition>

    </body>
</html>

